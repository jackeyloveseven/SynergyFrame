# SynergyFrame Gradio演示

这个Gradio演示界面为SynergyFrame框架提供了一个直观、交互式的用户界面，让您可以通过图形界面控制风格化过程，而无需编写代码。

## 功能特点

- **简单易用的用户界面**：通过下拉菜单、滑块和按钮直观控制所有参数
- **灵活的输入选择**：从预设库中选择物体和纹理，或上传自定义图像
- **实时预览**：在生成之前查看输入和风格组合的预览
- **完整的参数控制**：调整光照、模型设置和高级参数
- **两种生成模式**：支持Inpainting和Image-to-Image两种工作流

## 依赖安装（重要）

在运行演示之前，**必须**先手动安装以下依赖项：

```bash
# 首先安装基本依赖
pip install -r requirements.txt

# 然后安装兼容版本的Gradio及其依赖
pip install gradio==3.38.0 pydantic<2.0.0 fastapi<0.100.0
```

> ⚠️ **重要提示**：请严格按照上述版本安装，以避免兼容性问题。Gradio的较新版本可能会导致错误。

## 运行演示

安装依赖后，执行以下命令启动Gradio演示：

```bash
python gradio_demo.py
```

启动后，浏览器将自动打开一个网页（通常是 http://127.0.0.1:7860），显示SynergyFrame的控制界面。

## 使用方法

1. **选择输入**：
   - 从下拉菜单中选择目标物体和风格纹理
   - 或者上传自己的自定义图像

2. **选择生成模式**：
   - `Inpaint`：强约束条件下的精确风格化
   - `Img2Img`：更自由的风格转换

3. **调整参数**（可选）：
   - 光照设置：方向、环境光强度、漫反射强度
   - 高级设置：分割方法、推理步数、ControlNet权重等

4. **生成**：
   - 点击"生成"按钮开始处理
   - 等待几分钟（取决于您的硬件配置）
   - 查看生成结果

## 故障排除

如果您遇到问题：

- **循环报错**：如果程序启动时陷入循环错误，请尝试以下步骤：
  1. 停止当前运行的所有Python进程
  2. 卸载当前版本的Gradio: `pip uninstall -y gradio`
  3. 安装特定版本: `pip install gradio==3.38.0`
  4. 重新启动应用: `python gradio_demo.py`

- **缺少依赖错误**：如果看到缺少依赖的错误，请手动安装提示中提到的包，例如：
  ```bash
  pip install <缺少的包名>
  ```

- **内存不足错误**：减少模型的推理步数或考虑使用更小的输入图像
  
- **CUDA错误**：确保您有兼容的NVIDIA GPU和最新的CUDA驱动程序
  
- **模型加载错误**：检查是否所有必要的模型文件都已下载并放置在正确的目录中

## 最佳实践

- 在运行演示前先确保所有依赖已正确安装
- 如果遇到问题，尝试使用较低版本的Gradio（如3.32.0或3.38.0）
- 不要同时启动多个Gradio应用实例
- 查看控制台输出以获取详细的错误信息

## 注意事项

- 初次加载模型时可能需要较长时间
- 生成过程是计算密集型的，可能需要等待几分钟
- 对于最佳效果，推荐使用具有至少8GB VRAM的GPU 